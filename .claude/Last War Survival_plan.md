# **1\. Last War: Survival 게임 분석**

## **1.1. 게임 개요 및 특징**

* **장르의 융합:** 겉으로는 간단한 수학 연산과 피지컬을 요하는 '하이퍼 캐주얼 러닝 액션'처럼 보이지만, 실제로는 영지 건설, 연맹 전쟁, 영웅 육성이 포함된 **4X 전략(SLG)** 게임입니다.  
* **핵심 훅(Hook):** "배수 게이트(Multiplier Gate)"를 통과하며 병력을 기하급수적으로 늘려 좀비 떼를 쓸어버리는 시각적 쾌감을 제공합니다.  
* **비주얼:** 단순하고 직관적인 3D 카툰 렌더링을 사용하며, 아군(파란색)과 적/장애물(빨간색)의 색상 대비가 뚜렷합니다.

## **1.2. 주요 게임 요소 (웹 게임 구현 대상)**

1. **배수 게이트 (Math Gates):**  
   * 플레이어의 진행 경로에 나타나는 투명한 벽입니다.  
   * **파란색:** \+10, x2 등 병력을 증가시킵니다.  
   * **빨간색:** \-10, /2 등 병력을 감소시킵니다.  
   * 이 게임의 가장 중요한 전략 요소로, 순간적인 판단력을 요구합니다.  
2. **군중 제어 (Crowd Control):**  
   * 캐릭터 하나가 아닌, 수십\~수백 명의 병사들이 대형을 이루어 움직입니다.  
   * 병사 수가 곧 공격력(DPS)이자 체력(HP)이 됩니다.  
3. **영웅 시스템:**  
   * 일반 병사들 사이에 강력한 스킬을 쓰는 '영웅'이 포함됩니다.  
   * 탱커(방어막), 딜러(미사일 폭격), 서포터(이속 증가) 등으로 나뉩니다.

## **1.3. 주요 캐릭터 원형 (Archetypes)**

웹 게임에서는 저작권을 피해 다음과 같은 원형을 사용합니다:

* **머피 (탱커):** 선두에서 방패를 들고 데미지를 감소시킴.  
* **킴벌리 (딜러):** 주기적으로 미사일을 발사하여 광역 데미지를 입힘.  
* **모니카 (서포터):** 아군의 공격 속도나 이동 속도를 증가시킴.

# **2\. HTML5 웹 게임 기획서: \[Project Z-Rush\]**

## **2.1. 기획 의도**

* **컨셉:** 설치 없이 브라우저에서 즐기는 '무한 증식 슈팅 디펜스'.  
* **목표:** 단순한 조작으로 대규모 물량전을 쾌적하게 구현하여 시각적 만족감을 제공.  
* **타겟 플랫폼:** PC/Mobile 웹 브라우저 (반응형).

## **2.2. 게임 루프 (Core Loop)**

1. **시작:** 기본 영웅 1명과 소수의 병사로 시작.  
2. **진행 (Run):** 캐릭터는 자동으로 전진하며 사거리 내의 좀비를 자동 사격.  
3. **선택 (Gate):** 마우스/터치 드래그로 좌우 이동하여 유리한 '수학 게이트' 통과.  
4. **성장 (Growth):** 게이트 통과 시 병력 즉시 증원.  
5. **위기 (Boss/Wave):** 스테이지 끝의 보스나 대규모 좀비 웨이브와 전투.  
6. **결과:** 병력이 0이 되면 게임 오버, 보스 처치 시 스테이지 클리어 및 재화 획득.

## **2.3. 상세 시스템 명세**

### **A. 조작 (Controls)**

* **PC:** 마우스 좌클릭 드래그 (좌우 이동).  
* **Mobile:** 터치 슬라이드 (좌우 이동).  
* **특이사항:** 전진은 자동이며, 멈출 수 없음 (강제 스크롤).

### **B. 게이트 시스템 (Math Logic)**

* **연산 우선순위:** 사칙연산(+, \-, \*, /)을 적용.  
* **구현 로직:**  
  * Current\_Units \= (Current\_Units \+ Add\_Val) \* Multi\_Val  
  * 파란색 게이트는 항상 이득이 되도록, 빨간색은 손해가 되도록 배치.  
  * 두 게이트가 겹칠 경우 플레이어의 중심 좌표에 가까운 게이트 판정 적용.

### **C. 전투 시스템**

* **사격:** 가장 가까운 적을 향해 자동 발사 (Auto-targeting).  
* **피격:** 적과 충돌하거나 적의 투사체에 맞으면 병사 수 감소 (1명 \= 1 HP).  
* **진형(Formation):** 병사 수가 늘어날수록 원형 혹은 부채꼴로 퍼지며 시각적 볼륨감 확대.

### **D. UI/UX**

* **HUD:** 현재 병력 수(화면 중앙 캐릭터 머리 위), 획득 코인, 진행 거리 바.  
* **피드백:** 게이트 통과 시 텍스트 팝업 (x2\!, Great\!), 진동(모바일) 또는 화면 흔들림 효과.

# **3\. 단계별 구현 방안 (Roadmap)**

이 프로젝트는 **HTML5 Canvas** 와 **Vanilla JavaScript** (또는 성능을 위해 Pixi.js 등 라이브러리 고려 가능하나, 여기서는 순수 JS 기준)를 사용하여 구현합니다.

### **1단계: 핵심 엔진 구축 (Core Engine)**

* **목표:** 캐릭터가 움직이고, 화면이 스크롤 되는 느낌 구현.  
* **작업:**  
  * requestAnimationFrame 을 이용한 게임 루프 생성.  
  * 플레이어 객체(좌표, 속도) 생성 및 마우스 드래그에 따른 X축 이동 구현.  
  * 배경 스크롤링 처리 (플레이어가 가는 것이 아니라 배경과 오브젝트가 Y축으로 내려옴).

### **2단계: 게이트 및 연산 로직 (Gate Mechanic)**

* **목표:** 게이트를 통과하면 숫자가 변하는 로직 구현.  
* **작업:**  
  * 장애물(게이트) 클래스 생성 (속성: 연산자, 값, 색상, 위치).  
  * 플레이어와 게이트 간의 AABB(Axis-Aligned Bounding Box) 충돌 처리.  
  * 충돌 시 수식 적용: if (gate.type \=== 'multiply') units \*= gate.value;  
  * 병사 수에 따른 시각적 표현(점이나 작은 스프라이트 개수) 변경.

### **3단계: 적군 및 전투 시스템 (Combat)**

* **목표:** 적을 쏘고 파괴하는 슈팅 요소 구현.  
* **작업:**  
  * 적(좀비) 스폰 매니저 구현 (무작위 위치 또는 패턴).  
  * 총알 객체 생성 및 발사 로직 (가장 가까운 적 거리 계산 Math.hypot).  
  * 총알과 적의 충돌 처리, 적 사망 처리.  
  * 적과 플레이어 본체 충돌 시 병력 감소 로직.

### **4단계: 영웅 및 보스전 (Advanced Content)**

* **목표:** 게임의 단조로움을 없애는 특수 요소.  
* **작업:**  
  * 주기적으로 미사일을 발사하는 '영웅' 유닛 추가 (플레이어 그룹 중앙에 고정).  
  * 스테이지 마지막에 이동하지 않고 공격만 하는 거대 보스 구현.  
  * HP 바 UI 추가.

### **5단계: 폴리싱 및 최적화 (Polish)**

* **목표:** 상품성 강화.  
* **작업:**  
  * 사운드 효과 (발사음, 획득음, BGM) 추가.  
  * 파티클 효과 (적 폭발 시, 게이트 통과 시).  
  * 모바일 브라우저 대응 (Viewport 메타 태그, 터치 이벤트 매핑).  
  * 오브젝트 풀링(Object Pooling) 기법 적용 (총알, 적 생성 시 메모리 최적화).